---
layout: post
title: "Docker 이해하기:arm환경에서 Docker로 python서버 구성하기"
date: 2024-05-15
categories: docker
tags: docker
author: yunsoo Shin
typora-root-url: ../
---

# Docker 소개

Docker는 개발자들이 어디에서나 일관된 환경에서 애플리케이션을 실행할 수 있도록 컨테이너라는 형태로 소프트웨어를 패키징할 수 있는 플랫폼으로, 소프트웨어 개발에 혁명을 일으켰습니다. 이 글에서는 Docker가 등장한 배경, 그리고 컨테이너, 이미지, 볼륨, 빌드 프로세스 같은 주요 개념을 탐구하고, 이러한 개념들이 어떻게 효율적이고 예측 가능한 소프트웨어 배포에 기여하는지 살펴보고 , ARM아키텍쳐로 구성된 로컬환경에서
버전이 낮은 Python서버를 Docker로 구성하고 서버를 돌려봅니다..

## Docker의 등장

Docker는 2013년에 도입되어, 서로 다른 컴퓨팅 환경에서 소프트웨어를 신뢰성 있게 구성하는 복잡성에 대응하였습니다. 컨테이너 기술을 활용하여 기반 인프라에 관계없이 코드가 동일하게 실행될 수 있도록 함으로써 개발, 테스트 및 배포 워크플로우를 단순화했습니다.

## 주요 Docker 개념 이해

### 컨테이너

**컨테이너**는 코드, 런타임, 라이브러리 및 시스템 설정을 포함하여 애플리케이션 실행에 필요한 모든 것이 포함된 경량의 실행 가능한 패키지입니다. Docker 이미지를 기반으로 운영되며, 각 컨테이너는 서로 완전히 격리되어 있어 같은 호스트에서 실행되어도 서로 영향을 주지 않습니다. 컨테이너는 일시적인 상태를 가지며 실행 중일 때만 상태가 유지됩니다.

### 이미지

**이미지**는 컨테이너 실행에 필요한 파일과 설정이 포함된 불변의 스냅샷입니다. 컨테이너를 생성하는 데 사용되는 템플릿으로 생각할 수 있으며, 하나의 이미지에서 여러 컨테이너를 생성할 수 있습니다. 이미지는 대개 Dockerfile이라는 텍스트 문서를 통해 생성되며, 이 문서에는 컨테이너를 어떻게 구성할지에 대한 지시사항이 포함되어 있습니다.

### 볼륨

**볼륨**은 데이터를 컨테이너와 독립적으로 저장하고 관리할 수 있는 메커니즘입니다. 컨테이너는 일반적으로 불변하며 상태가 없지만, 볼륨을 사용하면 데이터를 영구적으로 저장하거나 여러 컨테이너 간에 공유할 수 있습니다. 볼륨은 호스트 시스템의 특정 부분에 데이터를 저장하며, 컨테이너가 삭제되어도 데이터는 유지됩니다.

### 빌드 프로세스

**빌드 프로세스**는 소스 코드로부터 Docker 이미지를 생성하는 과정입니다. Dockerfile에 정의된 지시사항을 순차적으로 실행하여 이미지의 새로운 계층을 추가하며, 이 계층들이 최종 이미지를 구성합니다. 이렇게 생성된 이미지는 재사용이 가능하며 다른 시스템에 쉽게 배포할 수 있습니다.

## Docker 이미지 준비

이제 기본적인 도커의 개념에 대해 학습했다 믿고 python서버를 docker위에서 구동되는 방법에 대해 소개합니다.
Docker를 사용하여 호환성 문제를 해결할 수 있는 Python 3.10 이미지를 준비합니다. `Dockerfile`을 작성하여 필요한 설정을 구성할 수 있습니다.

### Python 3.10 이미지를 기반으로 설정

FROM python:3.10

### 작업 디렉토리 설정

WORKDIR /app

### 의존성 파일 복사

COPY requirements.txt .

### 의존성 설치

#### requirements.txt에는 사용중인 라이브러리의 의존성들이 담겨져 있습니다.

```
RUN pip install -r requirements.txt
```

### 애플리케이션 코드 복사

COPY . .

### 서버 실행

```
CMD ["python", "app.py"]
```

## 도커 이미지 빌드

```
docker build -t my-python-app .
```

## 도커 컨테이너실행

```
docker run -p 7077:7077 my-python-app
```

포트번호는 각자 REST API통신을 하기위해 합의된 번호를 사용합니다.
![Desktop View](/assets//img/post/20240515/dockerRun.jpg)

도커 컨테이너가 잘 실행되는지 확인하기위해서 REST API를 날려보고 WireShark로 원활한 통신을 하는지 확인해 봅니다

![Desktop View](/assets//img/post/20240515/dockerPacketWireShark.jpg)
서버에서 미리 정의해둔 비지니스 로직을 실행하고 반환하는 값이 정상적입니다.

위의 방식으로 7077 포트를 사용하는 파이썬 서버를 도커환경에서 구성하고 API를 실행시켜보았습니다.

이로써 어떤 상황에도 서버를 원활하게 구동할 준비가 되었습니다!
