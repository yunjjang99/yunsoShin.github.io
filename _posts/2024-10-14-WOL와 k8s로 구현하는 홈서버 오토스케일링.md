 # 가정용 서버 환경 구축: 라즈베리파이와 PC를 활용한 오토스케일링

최근 저는 집에서 가정용 서버 환경을 구축하며, 서버 자동화를 위한 스크립트를 작성했습니다. 이 스크립트는 워커 노드와 메인 노드 설정을 자동화하여, 유기적인 오토스케일링 시스템을 구현하는 것을 목표로 하고 있습니다.

## 라즈베리파이5와 PC의 활용

첫 번째 단계로 라즈베리파이5를 마스터 노드로 설정하고, 집에 있는 PC 3대를 워커 노드로 연결했습니다. 각 PC는 Windows 환경이지만, 부팅되면 자동으로 리눅스 가상 환경을 시작하여 Kubernetes의 워커 노드 역할을 합니다.

### PC 사양

각 PC는 다음과 같은 사양을 가지고 있습니다:

- **Main node PC**: 라즈베리파이5 8GB RAM
- **PC1**: 16GB RAM, Ryzen 5600 CPU, 4060TI GPU
- **PC2**: 22GB RAM, Ryzen 2600X CPU, 1060 6GB GPU
- **PC3**: 32GB RAM, Mac M1 Pro

이 PC들은 각각 다수의 리눅스 가상 환경을 동시에 구동하도록 설정되어 있으며, 부팅 즉시 가상화된 워커 노드들이 준비됩니다.

## WOL(웨이크온랜) 기반 오토스케일링

오토스케일링의 핵심은 WOL(Wake-on-LAN) 시스템을 활용해 트래픽 부하에 따라 PC를 자동으로 부팅하는 것입니다. 기본적으로 트래픽이 서버 용량의 50%를 초과하면 첫 번째 PC가 자동으로 부팅됩니다. 이후 첫 번째 PC를 포함한 리소스가 다시 50%를 초과하면 두 번째 PC가 부팅됩니다. 이런 식으로 최대 3대의 PC가 서버 리소스에 맞춰 순차적으로 부팅되며, 추가적인 서버 용량을 제공합니다.

## 트래픽 분산 및 전력 절약의 장점

이 시스템을 통해 얻을 수 있는 두 가지 주요 장점은 다음과 같습니다:

1. **트래픽 분산 처리**: 각 PC가 필요할 때만 부팅되므로, 서버의 리소스를 효율적으로 관리할 수 있습니다. 트래픽이 몰릴 때도 서버의 부하를 최소화하며 안정적인 성능을 유지할 수 있습니다.
2. **전력 소비 절감**: 트래픽이 과도하지 않은 경우에는 추가적인 PC 부팅이 필요하지 않아 전력 소비를 절감할 수 있습니다. 필요할 때만 리소스를 추가하고, 불필요할 때는 PC를 꺼두는 방식으로 에너지를 아낄 수 있습니다.

이번 프로젝트는 가정용 서버 환경에서 자원 효율성과 전력 소비 절감을 목표로 설계되었습니다. WOL과 가상화 기술을 통해 트래픽이 많을 때만 리소스를 확장하는 유연한 오토스케일링을 구현함으로써, 가정 내 서버 관리의 효율성을 극대화할 수 있습니다.

앞으로도 이 시스템을 최적화하여 다양한 상황에서 더욱 효율적으로 서버를 운영할 계획입니다.
